# 函数作用域及匿名函数

## 一、匿名函数

#### 1、匿名函数定义

​	lambda   参数 : 表达式

```python
# 匿名函数定义
li = [1, 2, 22, 5, 6, 11]  # 定义列表
# 要求；使用匿名函数过滤出列表里面大于5的数
a = list(filter(lambda x: x > 5, li))  # 匿名函数的参数x 要从列表li中过滤出表达式x>5的数字
print(sorted(a))   #输出并排序大于的数字  [6, 11, 22]
```

#### 2、代码案例

```python
# 案例一
def func(a, b, unm):  # a, b用于接收参数，num接收lambda匿名函数
    c = unm(a, b)  # 将匿名函数运算后赋值给c
    return c  # return出去c
print(func(11, 22, lambda x, y: x+y))
# 案例二
def jia_fa(a, b, js):  # a接收77，b接收2，JS接收xx，xx用input输入匿名函数(lambda x, y:x+y)，用作运算 （1）
    k = js(a, b)  # js接收到xx传入的匿名函数后，把a跟b接收到的数用作运算，用k变量接收。（4）
    return k  # return出k的值 （6）


xx = input('请输入匿名函数 ')  # 输入匿名函数（3）
xx = eval(xx)  # xx接收到的字符串格式，用eval转换进行运算。（5）
m = jia_fa(77, 2, xx)  # 函数调用传入参数，变量m接收这个函数调用。 （2）
print(m)  # 打印结果 （7）
```



## 二、函数作用域

#### 1、函数作用域概述

在当前空间命名的变量，就是在当前空间起作用，也就是对一个名字起作用的范围`当前空间可以有效使用，出了这个空间无效`

#### 2、局部变量

局部部变量指的是在函数里面定义生效的变量，函数外无法调用。

#### 3、全局变量

全局变量指的是，在整个函数外部（python）文件中生效的变量。

#### 4、变量的修改

1. 全局变量修改：在函数内部修改外部的变量。  global+变量名

```python
a = 200
def func1():
    global a  # 声明修改全局变量，在未声明的情况下函数里面a没有值
    a += 1
    print(a)
func1()
```

2. 局部变量修改：nonlocal+变量名`函数嵌套时使用，内层嵌套函数使用外层函数时。`

```python
def func1():
    a = 100
    print(a)

    def func2():
        nonlocal a  # 声明嵌套函数内部访问外层函数变量
        a += 1
        return a

    c = func2()
    print(c)


func1()  # 100, 101
```

## 三、闭包

#### 1、闭包定义

函数里面嵌套函数，外层函数返回里层函数名，这种情况称之为闭包。

```python
def f1():
    print('我是1')

    def f2():
        print('我是2')

    return f2  # f2的return值不会再函数调用时调用出来，而是返回了一个值给了f1函数，（这时f2的值一直保存在函数里）当要调用f2的值时将f1的函数调用赋值给一个变量，并用这个变量进行函数调用（在使用f1函数调用时f2的函数是没有调用的）


f1()
y = f1()  # y指向是跟f1为同一个内层地址
y()  # y的函数调用就是f2的函数值。
```



## 四、递归函数

#### 1、递归函数定义

函数里面调用自身

```python
def f(n):
    if n == 1:
        return 1
    return n * f(n-1)


print(f(5))
```









































